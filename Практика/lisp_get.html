<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>

<Head>
<Meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<Title>Электронный ресурс по учебной дисциплине ОСАПр. Использование функций GET для ввода данных</Title>
<Meta Name="Description" http-equiv="description" Content="Электронный ресурс по учебной дисциплине ОСАПр. Использование функций GET для ввода данных">
<Link Rel="stylesheet" Type="text/css" Href="../../../Оболочка/acad.css">

<Script>hljs.initHighlightingOnLoad();</Script>

<Script Language="JavaScript">
<!--
	function mOver(num) {if (document.images) {document.images['link'+num].src=eval('active'+num+'.src');}}
	function mOut(num) {if (document.images) {document.images['link'+num].src=eval('normal'+num+'.src');}}
//-->
</Script>
</Head>

<Body Bgcolor=#E6E6E6 TopMargin=1 LeftMargin=1 MarginWidth=0 MarginHeight=0 >
<div class=max>
<Script Language="JavaScript"><!--
if (document.images) {
	normal1=new Image(190,29);normal1.src="../../../Оболочка/images//01a.gif";
	active1=new Image(190,29);active1.src="../../../Оболочка/images//01p.gif";
	normal2=new Image(190,29);normal2.src="../../../Оболочка/images/02a.gif";
	active2=new Image(190,29);active2.src="../../../Оболочка/images/02p.gif";
	normal3=new Image(190,29);normal3.src="../../../Оболочка/images//03a.gif";
	active3=new Image(190,29);active3.src="../../../Оболочка/images//03p.gif";
	normal4=new Image(159,46);normal4.src="../../../Оболочка/images//09a.gif";
	active4=new Image(159,46);active4.src="../../../Оболочка/images//09p.gif";
	normal5=new Image(159,54);normal5.src="../../../Оболочка/images//10a.gif";
	active5=new Image(159,54);active5.src="../../../Оболочка/images//10p.gif";
	normal7=new Image(190,29);normal7.src="../../../Оболочка/images//7a.gif";
	active7=new Image(190,29);active7.src="../../../Оболочка/images//7p.gif";
	normal11=new Image(170,25);normal11.src="../../../Оболочка/images//02_1a.gif";
	active11=new Image(170,25);active11.src="../../../Оболочка/images//02_1p.gif";
	normal12=new Image(170,19);normal12.src="../../../Оболочка/images//02_2a.gif";
	active12=new Image(170,19);active12.src="../../../Оболочка/images//02_2p.gif";
	normal13=new Image(170,19);normal13.src="../../../Оболочка/images//02_3a.gif";
	active13=new Image(170,19);active13.src="../../../Оболочка/images//02_3p.gif";
	normal24=new Image(170,19);normal24.src="../../../Оболочка/images//04a.gif";
	active24=new Image(170,19);active24.src="../../../Оболочка/images//04p.gif";
	normal25=new Image(170,19);normal25.src="../../../Оболочка/images//05a.gif";
	active25=new Image(170,19);active25.src="../../../Оболочка/images//05p.gif";
	normal26=new Image(170,19);normal26.src="../../../Оболочка/images//06a.gif";
	active26=new Image(170,19);active26.src="../../../Оболочка/images//06p.gif";
	normal14=new Image(170,19);normal14.src="../../../Оболочка/images//l1_a.gif";
	active14=new Image(170,19);active14.src="../../../Оболочка/images//l1_p.gif";
	normal15=new Image(170,19);normal15.src="../../../Оболочка/images//z_a.gif";
	active15=new Image(170,19);active15.src="../../../Оболочка/images//z_p.gif";
	normal16=new Image(170,19);normal16.src="../../../Оболочка/images//l2_a.gif";
	active16=new Image(170,19);active16.src="../../../Оболочка/images//l2_p.gif";
	normal17=new Image(170,19);normal17.src="../../../Оболочка/images//z_a.gif";
	active17=new Image(170,19);active17.src="../../../Оболочка/images//z_p.gif";
	normal18=new Image(170,19);normal18.src="../../../Оболочка/images//l3_a.gif";
	active18=new Image(170,19);active18.src="../../../Оболочка/images//l3_p.gif";
	normal19=new Image(170,19);normal19.src="../../../Оболочка/images//z_a.gif";
	active19=new Image(170,19);active19.src="../../../Оболочка/images//z_p.gif";
	normal20=new Image(170,19);normal20.src="../../../Оболочка/images//l4_a.gif";
	active20=new Image(170,19);active20.src="../../../Оболочка/images//l4_p.gif";
	normal21=new Image(170,19);normal21.src="../../../Оболочка/images//z_a.gif";
	active21=new Image(170,19);active21.src="../../../Оболочка/images//z_p.gif";
	normal27=new Image(170,19);normal27.src="../../../Оболочка/images/15a.gif";
	active27=new Image(170,19);active27.src="../../../Оболочка/images/15p.gif";
}
//-->
</Script>

<Left>
<A Name="Top"></A>
<Table Border=0 Width=100% CellSpacing=0 CellPadding=0>
<Tr>
 <Td BackGround=../../../Оболочка/images/bg01.gif Width=190 Height=91 name="link19">&nbsp;</Td>
 <Td Rowspan=2 BackGround=../../../Оболочка/images/bg02_acad.gif Height=120 Valign=Bottom style="background-repeat:no-repeat;">

<Table BackGround=../../../Оболочка/images/raspor.gif Border=0 CellSpacing=0 CellPadding=0>
 <Tr>
  <Td Width=230></Td>
  <Td><P Class=h6>AutoLISP<Br><Img Src=../../../Оболочка/images/raspor.gif Width=1 Height=26></P></Td>
 </Tr>
</Table>

</Td></Tr>
<Tr>
 


<Td BackGround=../../../Оболочка/images/bg03.gif>
 <A Href=../../../Программа/!rabprog.html onMouseOver="mOver(26)" onMouseOut="mOut(26)"><Img Src=../../../Оболочка/images/06a.gif Width=190 Height=29 Border=0 
Alt="Рабочая программа" name="link26"></A><Br></Td>

</Tr>
<Tr>
 <Td BackGround=../../../Оболочка/images/bg09.gif Valign=Top>

<Table Border=0 CellSpacing=0 CellPadding=0>
<Tr><Td BackGround=../../../оболочка/images/bg03.gif Valign=Top>
	<A Href=../../../Теория/!lekcii.html onMouseOver="mOver(7)" onMouseOut="mOut(7)"><Img Src=../../../оболочка/images/7a.gif Width=190 Height=29 Border=0 
Alt="Лекции" name="link7"></A><Br>
 </Td>
 <Tr><Td BackGround=../../../оболочка/images/bg04.gif Width=190 Valign=Top>
 <a href="../../!zadanie.html"> <Img Src=../../../оболочка/images/8p.gif Border=0 Width=190 Height=29 Alt="Лабораторные работы"></a><Br></Td>
<Tr><Td BackGround=../../../оболочка/images/bg05_1.gif Width=190 Valign=Top>
  <A href="../lb1/!acad.html" onMouseOver="mOver(14)" onMouseOut="mOut(14)"><Img Src=../../../оболочка/images/l1_a.gif Width=170 Height=40 Border=0 Alt="Лабораторная работа 1" name="link14"></A><Br></Td></Tr>
<Tr><Td BackGround=../../../оболочка/images/bg06.gif Width=190 Height=36 Valign=Top>
   <A href="../lb1/laba1.html"  onMouseOver="mOver(15)" onMouseOut="mOut(15)"><Img Src=../../../Оболочка/images/z_a.gif Width=170 Height=20 Border=0 Alt="Задания 1" name="link15"></A><Br>
  <A href="../lb2/!mechanic.html" onMouseOver="mOver(18)" onMouseOut="mOut(18)"><Img Src=../../../Оболочка/images/l3_a.gif Width=170 Height=40 Border=0 Alt="Лабораторная работа 2" name="link18"></A><Br>
<A  href="../lb2/laba2.html" onMouseOver="mOver(19)" onMouseOut="mOut(19)"><Img Src=../../../Оболочка/images/z_a.gif Width=170 Height=20 Border=0 Alt="Задания 2" name="link19"></A><Br>
  <A href="../lb2/!mechanic.html" onMouseOver="mOver(20)" onMouseOut="mOut(20)"><Img Src=../../../Оболочка/images/l4_a.gif Width=170 Height=40 Border=0 Alt="Лабораторная работа 3" name="link20"></A><Br>
<A href="../lb3/laba3.html"1 onMouseOver="mOver(21)" onMouseOut="mOut(21)"><Img Src=../../../Оболочка/images/z_a.gif Width=170 Height=20 Border=0 Alt="Задания 3" name="link21"></A><Br>
 <A href="../lb4/!lisp.html" onMouseOver="mOver(16)" onMouseOut="mOut(16)"><Img Src=../../../Оболочка/images/l2_a.gif Width=170 Height=40 Border=0 Alt="Лабораторная работа 4" name="link16"></A><Br>
<A  href="../lb4/laba4.html" onMouseOver="mOver(17)" onMouseOut="mOut(17)"><Img Src=../../../Оболочка/images/z_a.gif Width=170 Height=20 Border=0 Alt="Задания 4" name="link17"></A><Br>
  <Img Src=../../../Оболочка/images/bg07.gif Width=190 Height=23><Br></Td></Tr>
 <Tr><Td BackGround=../../../оболочка/images/bg03.gif Valign=Top>
   <A Href=../../../Заочнику/!zaochnoe.html onMouseOver="mOver(27)" onMouseOut="mOut(27)"><Img Src=../../../Оболочка/images/15a.gif Width=190 Height=29 Border=0  Alt="Заочнику" name="link27"></A><Br>
  <A Href=../../../Контроль_знаний/!samocontrol.html onMouseOver="mOver(25)" onMouseOut="mOut(25)"><Img Src=../../../оболочка/images/05a.gif Width=190 Height=29 Border=0 
Alt="Самоконтроль" name="link25"></A><Br>
	 <Img Src=../../../оболочка/images/bg08.gif Width=190 Height=13><Br>
</Table></Td>
 <Td Valign=Top>
<P><Br></P>

<Center>
<Table Border=0 CellPadding=0 CellSpacing=0 Width=95%><Tr><Td>

<Br>
<Table Border=0 CellPadding=0 CellSpacing=0>
<Tr><Td Bgcolor=#000000><Img Src=../../../оболочка/images/raspor.gif Height=2></Td>
<Tr><Td Valign=Center Height=30><span Class=h1>Использование функций get для ввода данных</span></Td></Tr>
<Tr><Td Bgcolor=#000000><Img Src=../../../оболочка/images/raspor.gif Height=2></Td></Tr>
</Table></Center><Br>


<P>Для ввода данных с клавиатуры в AutoLISP существует семейство функций get. Для всех основных типов данных есть своя функция get. Все аргументы функций этого семейства необязательны. В качестве первого аргумента иногда выступает необязательная двумерная точка в текущей ПСК. Все функции get могут иметь в качестве аргумента произвольную строковую константу, в которой может содержаться текст запроса или какая-то подсказка, выводимая при запросе пользователю ввести какие-то данные. Все функции get ожидают ответа пользователя, т. е. приостанавливают выполнение программы до тех пор, пока не будет осуществлен ввод (нажата клавиша RETURN). Ввод может быть осуществлен как с клавиатуры, так и при помощи устройства указания. Вводя точки с экрана, вы можете захотеть, чтобы в процессе перемещения курсора по экрану Автокад показывал "резиновую" линию. Это позволяют делать практически все функции семейства get. Все вводимые данные автоматически преобразуются в нужный тип данных. В ответ на запрос функций семейства get нельзя вводить выражение AutoLISP: это приведет к ошибке и выводу сообщения "Can't reenter AutoLISP" ("Не могу войти в AutoLISP повторно"). В макроопределениях меню функции get нужно выделять обратной косой чертой с тем, чтобы AutoCAD обеспечил паузы для ввода данных. Вот список этих функций:</P>

<pre><code> (getangle [точка] [текст запроса-подсказки])</code></pre>

<P>Возвращает угол в радианах между задаваемым пользователем вектором и положительным направлением оси Х в текущей плоскости построений. Функция всегда возвращает угол в радианах вне зависимости от текущей установки переменных. Начальная точка вектора может быть определена первым аргументом функции. Вторую точку вектора можно указать на экране мышью, при этом AutoCAD нарисует "резиновую" линию от точки, указанной первым аргументом, до текущего положения курсора. Если первый аргумент опущен, AutoCAD потребует ввода двух точек. Не запрещается указывать трехмерные точки (см. также функцию GETORIENT).</P>

<pre><code> (getcorner точка ["текст запроса-подсказки"])</code></pre>

<P>Эта функция, так же как и getpoint, возвращает координаты указанной пользователем точки в текущей ПСК. Отличие от getpoint заключается в том, что функция getcorner строит "резиновую" рамку при передвижении курсора по экрану, первый угол которой может быть определен первым аргументом функции. В этой функции первый аргумент обязателен. Если вводится трехмерная точка, то координата Z игнорируется (см. функции getpoint и getdist).</P>

<pre><code> (getdist [точка] [текст запроса-подсказки])</code></pre>

<P>Какими бы ни были текущие единицы измерения (например, футы), эта функция всегда возвращает действительное число. Если расстояние указывается с клавиатуры, функция тестирует значения системной переменной flatland и флага трехмерных точек функции initget. Как видим из таблицы, если системная переменная flatland установлена в единицу, а флаг "трехмерные точки" функции initget не установлен, то функция, getdist будет обрабатывать задаваемую трехмерную точку как двумерную, проецируя ее на текущую ПСК:</P>

<Center>
<Table Border="1" CellPadding="2" CellSpacing="1">
 <Tr BgColor="#D1D6E9">
 <Td><P Class=tcb>flatland</P></Td>
 <Td><P Class=tcb>initget</P></Td>
 <Td><P Class=tcb>Возвращается ли расстояние<Br>
 между трехмерными точками?</P></Td>
</Tr>
<Tr Bgcolor=#DCDCDC>
 <Td><P Class=tc>0</P></Td>
 <Td><P Class=tc>1</P></Td>
 <Td><P Class=tc>Да</P></Td>
</Tr>
<Tr Bgcolor=#EAEAEA>
 <Td><P Class=tc>0</P></Td>
 <Td><P Class=tc>0</P></Td>
 <Td><P Class=tc>Да</P></Td>
</Tr>
</Tr>
<Tr Bgcolor=#DCDCDC>
 <Td><P Class=tc>1</P></Td>
 <Td><P Class=tc>1</P></Td>
 <Td><P Class=tc>Да</P></Td>
</Tr>
<Tr Bgcolor=#EAEAEA>
 <Td><P Class=tc>1</P></Td>
 <Td><P Class=tc>0</P></Td>
 <Td><P Class=tc>Нет</P></Td>
</Tr>
</Table></Center>
<Br >

<pre><code> (getenv имя_переменной)</code></pre>

<P>Возвращает строковое значение, присвоенное переменной среды DOS. Здесь имя переменной&nbsp;- строковая константа, представляющая собой имя переменной среды. Если эта переменная не определена, возвращается nil.</P>

<pre><code> (getint [текст запроса-подсказки])</code></pre>

<P>Ввод целого числа.</P>

<pre><code> (getkword [текст запроса-подсказки])</code></pre>

<P>Запрашивает у пользователя ключевое слово, определенное ранее при помощи функции initget. Если ответ не совпадает ни с одним определенным ключевым словом, AutoCAD попросит повторить ввод. Если ответ совпадает с ключевым словом, функция GETKWORD возвращает это ключевое слово как строковую константу. Пустой ввод, если разрешен, возвращает nil.</P>

<P Class=h55>Пример:</P>
<pre><code> (initget 1 "Yes No")
(setq x (getkword "Are you sure? Yes/No"))</code></pre>

<P>запросит пользователя и установит в символ Х либо "Yes", либо "No" в зависимости от ответа. Можно отвечать только одной начальной буквой и неважно, строчной или прописной. В данной ситуации пустой ввод не разрешен, поэтому при неправильном ответе AutoCAD попросит повторить ввод.</P>

<pre><code> (getorient [точка] [текст запроса-подсказки])</code></pre>

<P>То же, что и GETANGLE, однако измерение угла осуществляется относительно текущего направления измерения углов, а не относительно нулевого направления оси Х (абсолютный угол, в отличие от GETANGLE, которая измеряет относительный угол: угол относительно нулевого направления оси X).</P>

<pre><code> (getpoint [точка] [текст запроса-подсказки])</code></pre>

<P>Позволяет ввести точку. Если первый аргумент присутствует, AutoCAD рисует "резиновую" линию от точки, определяемой первым аргументом. Указание трехмерных точек обрабатывается так же, как и в функции GETDIST.</P>

<pre><code> (getreal [текст запроса-подсказки])</code></pre>

<P>Позволяет вводить действительное число. Ввод может быть осуществлен только с клавиатуры (или через планшет).</P>

<pre><code> (getstring [флагпробела] [подсказка])</code></pre>

<P>Запрашивает строковую константу и возвращает ее. Если строка длиннее 132 символов, то возвращаются первые 132 символа. Если в введенной строке имеются символы обратной косой черты, то они заменяются на две обратные косые черты.</P>
<P>Если флаг пробела присутствует и не равен nil, вводимая строка может содержать пробелы и завершением ввода считается нажатие клавиши RETURN.</P>

<pre><code> (getvar имяпеременной)</code></pre>

<P>Возвращает значение системной переменной AutoCAD. Имя переменной должно быть заключено в кавычки (см. функцию SETVAR).</P>
<P>Как видим, функции семейства get имеют много общего. Но кроме сходства их объединяет то, что все режимы ввода устанавливаются одной и той же функцией initget:</P>

<pre><code> (initget [биты] [строка])</code></pre>

<P>Данная функция устанавливает различные режимы, в которых работают все функции семейства get, кроме функций getstring и getvar. Возвращается всегда nil. Биты&nbsp;- необязательное целое число, биты которого интерпретируются следующим образом:</P>

<Center>
<Table Border="1" CellPadding="2" CellSpacing="1">
 <Tr BgColor="#D1D6E9">
 <Td><P Class=tcb>Бит initget</P></Td>
 <Td><P Class=tcb>Значение бита</P></Td>
</Tr>
<Tr Bgcolor=#DCDCDC>
 <Td><P Class=tc>1</P></Td>
 <Td><P Class=tl>Запрещение пустого ввода</P></Td>
</Tr>
<Tr Bgcolor=#EAEAEA>
 <Td><P Class=tc>2</P></Td>
 <Td><P Class=tl>Запрещение ввода нуля</P></Td>
</Tr>
<Tr Bgcolor=#DCDCDC>
 <Td><P Class=tc>4</P></Td>
 <Td><P Class=tl>Запрещение ввода отрицательных чисел</P></Td>
</Tr>
<Tr Bgcolor=#EAEAEA>
 <Td><P Class=tc>5</P></Td>
 <Td><P Class=tl>Не контролируются лимиты, даже если включена системная переменная LIMCHECK</P></Td>
</Tr>
<Tr Bgcolor=#DCDCDC>
 <Td><P Class=tc>16</P></Td>
 <Td><P Class=tl>Возвращаются не двумерные, а трехмерные точки</P></Td>
</Tr>
<Tr Bgcolor=#EAEAEA>
 <Td><P Class=tc>32</P></Td>
 <Td><P Class=tl>"Резиновая" линия и рамка рисуются пунктиром</P></Td>
</Tr>
<Tr Bgcolor=#DCDCDC>
 <Td><P Class=tc>64</P></Td>
 <Td><P Class=tl>Игнорируется координата Z трехмерной точки</P></Td>
</Tr>
<Tr Bgcolor=#EAEAEA>
 <Td><P Class=tc>128</P></Td>
 <Td><P Class=tl>Возвращается произвольный код с клавиатуры</P></Td>
</Tr>
</Table></Center>

<P>Биты задаются целыми значениями, являющимися степенями двойки, как показано в таблице, и общее целое число формируется путем сложения желаемых целых чисел. (Получается логическое И битов.) Следует избегать установки недокументированных битов, поскольку последние версии AutoCAD могут их использовать. Если установленные для ввода правила не выполнены, то AutoCAD попросит повторить ввод. Управляющие биты воспринимаются теми функциями, для которых они имеют смысл.</P>
<P>Второй аргумент функции initget, строка, используется для задания списка ключевых слов при вводе. Использование ключевых слов описано выше.</P>



<Hr Width="90%" Color="#7685C6" Align="Right">
<Br>

</Td></Tr></Table>
</Center>

 </Td>
</Tr>
<Tr>
 <Td ColSpan=2>

<Table Border=0 CellSpacing=0 CellPadding=0>
 <Tr>
  <Td BackGround=../../../оболочка/images/b1.gif Width=458 Height=100 Valign=Bottom>
   <P Class=co>Copyright &copy; БГУИР, Кафедра Систем управления, 2015<Br>
   <Img Src=../../../оболочка/images/raspor.gif Width=1 Height=8></P></Td>
  <Td BackGround=../../../оболочка/images/b2.gif Width=159 Height=100>
   <A Href=#Top onMouseOver="mOver(4)" onMouseOut="mOut(4)">
<Img Src=../../../оболочка/images/09a.gif Width=159 Height=46 Border=0 Alt="К началу документа" name="link4"></A><Br>
   <A Href=../../../index.html onMouseOver="mOver(5)" onMouseOut="mOut(5)">
<Img Src=../../../оболочка/images/10a.gif Width=159 Height=54 Border=0 Alt="К первой странице" name="link5"></A></Td>
 </Tr>
</Table>

 </Td>
</Tr>
</Table>

</Body>
</HTML>